%%
%% macros.sty
%% 
%% Made by Alex Nelson <pqnelson@gmail.com>
%% Login   <alex@lisp>
%% 
%% Started on  2025-09-30T07:31:06-0700
%% Last update 2025-09-30T07:31:06-0700
%% 
\RequirePackage{xcolor}
\RequirePackage{titlesec}
\RequirePackage{amsthm,amsmath,amssymb}
\newdimen\tmpdimen
\tmpdimen=8.5in
%\tmpdimen=
\divide\tmpdimen by7
\RequirePackage[left=1in,textwidth=29pc,bottom=1in,top=5pc]{geometry}
%\RequirePackage[left=\tmpdimen,right=2\tmpdimen,bottom=1in,top=5pc]{geometry}

\RequirePackage{graphicx}

%% Enumerate lists
\RequirePackage{enumitem}
\setlist{nosep}
\setlist[enumerate]{label=(\arabic*),listparindent=\parindent}
%\renewcommand\theenumi{(\arabic{enumi})}
\RequirePackage{color}
\RequirePackage[all,color]{xy}
\SelectTips{cm}{}

\RequirePackage[dvipdfmx]{hyperref}

% add a period to the name of the lecture, if any
\newif\ifsectionnonempty\sectionnonemptyfalse
\newcommand\add@period[1]{#1\@addpunct{.}}
\newcommand{\sectiontitleformat}[1]{#1\ifsectionnonempty\@addpunct{.}\fi}

\titleformat{\section}% command
{\vspace{.8ex}\large\sffamily\bfseries}% format
{Lecture \thesection.}% label
{.5em}% sep
{\sectiontitleformat}% beforecode

\titleformat{\subsection}% command
{\bigbreak\sffamily\bfseries}% format
{\thesubsection.}% label
{\smallskipamount}% sep
{\add@period}% beforecode


%% Examples:
% \lecture[CW Complex] % for a named lecture
% \lecture{} % for an un-named lecture
% 
% Using \section{} should raise an error, \lecture[]{} should be used instead
\let\og@section\section
\def\section{\error}

\newcommand\lecture[1][\relax]{\ifx\relax#1\relax%
  \sectionnonemptyfalse\og@section{}% an un-named lecture
\else%
  \sectionnonemptytrue\og@section{#1}% a named lecture
\fi}

% TODO: this is an article redefinition; for books & reports, this is
% not needed...
\long\def\thebibliography#1{\og@section *{\refname }\@mkboth {\MakeUppercase \refname }{\MakeUppercase \refname }\list {\@biblabel {\@arabic \c@enumiv }}{\settowidth \labelwidth {\@biblabel {#1}}\leftmargin \labelwidth \advance \leftmargin \labelsep \@openbib@code \usecounter {enumiv}\let \p@enumiv \@empty \renewcommand \theenumiv {\@arabic \c@enumiv }}\sloppy \clubpenalty 4000 \@clubpenalty \clubpenalty \widowpenalty 4000\sfcode `\.\@m}

%% Theorems
\swapnumbers
\newtheorem{theorem}{Theorem}[section]
\newtheorem{projective-dim-thm}[theorem]{Projective Dimension Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{nakayama}[theorem]{Nakayama's Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{convention}[theorem]{Convention}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{slogan}[theorem]{Slogan}
\newtheorem{question}[theorem]{Question}
\newtheorem{puzzle}[theorem]{Puzzle}
\newtheorem{construction}[theorem]{Construction}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{node}[theorem]{}
\newtheorem{note}[theorem]{Note}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{caution}[theorem]{Caution}
\newtheorem{recall}[theorem]{Recall}
%\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{xca}[theorem]{Exercise}
\numberwithin{equation}{section}


% hyperlink stuff
\def\arXiv#1{\href{https://arxiv.org/abs/#1}{\texttt{arXiv:#1}}}

% common notation
\def\mapsfrom{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}
\let\nsubset\nsubseteq
\let\nsupset\nsupseteq

\def\into{\hookrightarrow}
\def\onto{\twoheadrightarrow}

% for proving iff statements
\newcommand\forwardproof{$(\Longrightarrow)$}
\newcommand\backwardproof{$(\Longleftarrow)$}

% Bourbaki-style ``big sum''
\DeclareRobustCommand\bigop[1]{%
  \mathop{\vphantom{\sum}\mathpalette\bigop@{#1}}\slimits@
}
\newcommand{\bigop@}[2]{%
  \vcenter{%
    \sbox\z@{$#1\sum$}%
    \hbox{\resizebox{\ifx#1\displaystyle.9\fi\dimexpr\ht\z@+\dp\z@}{!}{$\m@th#2$}}%
  }%
}

\newcommand{\freeprod}{\DOTSB\bigop{\star}}

\newcommand\del[1]{}

\endinput